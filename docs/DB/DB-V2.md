## Data dictionary generated by pgModeler

<a name="index"></a>
### Database: essaycoach

### Tables
* [public.class](#public.class)
* [public.enrollment](#public.enrollment)
* [public.feedback](#public.feedback)
* [public.feedback_item](#public.feedback_item)
* [public.marking_rubric](#public.marking_rubric)
* [public.rubric_item](#public.rubric_item)
* [public.rubric_level_desc](#public.rubric_level_desc)
* [public.submission](#public.submission)
* [public.task](#public.task)
* [public.teaching_assn](#public.teaching_assn)
* [public.unit](#public.unit)
* [public.user](#public.user)

---

<a name="public.class"></a>
### _public_.**class** `Table`

A table for class entity

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| class_id | smallint | &#10003; |  |  | &#10003; |  | Unique identifier for a class under a unit |
| unit_id_unit | varchar(10) |  | &#10003; |  | &#10003; |  |  |
| class_size | smallint |  |  |  | &#10003; | 0 | current number of students in the class |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| class_pk | PRIMARY KEY | class_id |  |  |  |  |  |
| class_size_ck | CHECK |  |  |  |  | class_size >= 0 | Class size must be non-negative |
| unit_class_fk | FOREIGN KEY | unit_id_unit | [public.unit](#public.unit) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.enrollment"></a>
### _public_.**enrollment** `Table`

The enrollment of student to a specific class. A student can only have one enrollment to one class of one unit anytime.

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| enrollment_id | integer | &#10003; |  |  | &#10003; |  | Unique identifier for each enrollment |
| user_id_user | integer |  | &#10003; | &#10003; | &#10003; |  |  |
| class_id_class | smallint |  | &#10003; | &#10003; | &#10003; |  |  |
| unit_id_unit | varchar(10) |  | &#10003; | &#10003; | &#10003; |  |  |
| enrollment_time | timestamp |  |  |  | &#10003; | now() | The time when the student is enrolled in the DBMS |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| enrollment_pk | PRIMARY KEY | enrollment_id |  |  |  |  |  |
| user_enrollment_fk | FOREIGN KEY | user_id_user | [public.user](#public.user) | CASCADE | RESTRICT |  |  |
| class_enrollment_fk | FOREIGN KEY | class_id_class | [public.class](#public.class) | CASCADE | RESTRICT |  |  |
| unit_enrollment_fk | FOREIGN KEY | unit_id_unit | [public.unit](#public.unit) | CASCADE | RESTRICT |  |  |
| user_id_class_id_unit_id_uq | UNIQUE | user_id_user, class_id_class, unit_id_unit |  |  |  |  | Every student can only enrolled to a specific class of a unit once |

#### Triggers
| Name | Attributes | Function | Firing mode | On event(s) | Per row | Condition | References | Description |
|  --- | --- | --- | --- | --- | :---: | --- | --- | --- |
| trg_increment_class_size | NOT DEFERRABLE | public.increase_class_size() | AFTER | ON INSERT | &#10003; |  |  | increase class size by 1 after student enroll |

[&uarr; Index](#index)

---

<a name="public.feedback"></a>
### _public_.**feedback** `Table`
| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| feedback_id | integer | &#10003; |  |  | &#10003; |  |  |
| submission_id_submission | integer |  | &#10003; | &#10003; | &#10003; |  |  |
| user_id_user | integer |  | &#10003; |  | &#10003; |  |  |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| feedback_pk | PRIMARY KEY | feedback_id |  |  |  |  |  |
| submission_fk | FOREIGN KEY | submission_id_submission | [public.submission](#public.submission) | CASCADE | RESTRICT |  |  |
| feedback_uq | UNIQUE | submission_id_submission | [public.submission](#public.submission) |  |  |  |  |
| user_feedback_fk | FOREIGN KEY | user_id_user | [public.user](#public.user) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.feedback_item"></a>
### _public_.**feedback_item** `Table`

A section in the feedback as per the rubric

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| feedback_item_id | integer | &#10003; |  |  | &#10003; |  | unique identifier for feedback item |
| feedback_id_feedback | integer |  | &#10003; | &#10003; | &#10003; |  |  |
| rubric_item_id_rubric_item | integer |  | &#10003; | &#10003; | &#10003; |  |  |
| feedback_item_score | smallint |  |  |  | &#10003; |  | actual score of the item |
| feedback_item_comment | text |  |  |  |  |  | short description to the sub-item grade |
| feedback_item_source | varchar(10) |  |  |  | &#10003; |  | the source of feedback: 
ai, human, or revised if ai feedback is slightly modifed by human |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| feedback_item_pk | PRIMARY KEY | feedback_item_id |  |  |  |  |  |
| feedback_item_source_ck | CHECK |  |  |  |  | feedback_item_source IN ('ai', 'human', 'revised') |  |
| feedback_feedback_item_fk | FOREIGN KEY | feedback_id_feedback | [public.feedback](#public.feedback) | CASCADE | RESTRICT |  |  |
| rubric_item_feedback_item_fk | FOREIGN KEY | rubric_item_id_rubric_item | [public.rubric_item](#public.rubric_item) | CASCADE | RESTRICT |  |  |
| feedback_id_rubric_item_id_uq | UNIQUE | feedback_id_feedback, rubric_item_id_rubric_item |  |  |  |  |  |

[&uarr; Index](#index)

---

<a name="public.marking_rubric"></a>
### _public_.**marking_rubric** `Table`

entity for a marking rubric. A marking rubric has many items.

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| rubric_id | integer | &#10003; |  |  | &#10003; |  | unique identifier for rubrics |
| user_id_user | integer |  | &#10003; |  | &#10003; |  |  |
| rubric_create_time | timestamp |  |  |  | &#10003; | now() | timestamp when the rubirc is created |
| rubric_desc | varchar(100) |  |  |  |  |  | description to the rubrics |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| marking_rubric_pk | PRIMARY KEY | rubric_id |  |  |  |  |  |
| user_marking_rubric_fk | FOREIGN KEY | user_id_user | [public.user](#public.user) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.rubric_item"></a>
### _public_.**rubric_item** `Table`

An item(dimension) under one rubric

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| rubric_item_id | integer | &#10003; |  |  | &#10003; |  | unique identifier for item |
| rubric_id_marking_rubric | integer |  | &#10003; |  | &#10003; |  |  |
| rubric_item_name | varchar(20) |  |  |  | &#10003; |  | Title(header) name for the item |
| rubric_item_weight | numeric(3,1) |  |  |  | &#10003; |  | the weight of the item on a scale of 100%, using xx.x |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| item_weight_ck | CHECK |  |  |  |  | rubric_item_weight > 0 | weight must be greater than 0 |
| rubric_item_pk | PRIMARY KEY | rubric_item_id |  |  |  |  |  |
| marking_rubric_rubric_item_fk | FOREIGN KEY | rubric_id_marking_rubric | [public.marking_rubric](#public.marking_rubric) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.rubric_level_desc"></a>
### _public_.**rubric_level_desc** `Table`

The detailed description to each of the score range under a rubric item under a rubric.

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| level_desc_id | integer | &#10003; |  |  | &#10003; |  | unique identifier for each level desc under one rubric |
| rubric_item_id_rubric_item | integer |  | &#10003; |  | &#10003; |  |  |
| level_min_score | smallint |  |  |  | &#10003; |  | min for the item |
| level_max_score | smallint |  |  |  | &#10003; |  | max for the item |
| level_desc | varchar(500) |  |  |  | &#10003; |  |  |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| min_max_ck | CHECK |  |  |  |  | level_min_score >= 0 AND level_max_score > 0 AND level_min_score < level_max_score |  |
| rubric_level_desc_pk | PRIMARY KEY | level_desc_id |  |  |  |  |  |
| rubric_item_rubric_level_desc_fk | FOREIGN KEY | rubric_item_id_rubric_item | [public.rubric_item](#public.rubric_item) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.submission"></a>
### _public_.**submission** `Table`

A weal entity for task submissions.

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| submission_id | integer | &#10003; |  |  | &#10003; |  | unique identifier for submission |
| submission_time | timestamp |  |  |  | &#10003; | now() | time/date of submission |
| task_id_task | integer |  | &#10003; |  | &#10003; |  |  |
| user_id_user | integer |  | &#10003; |  |  |  |  |
| submission_txt | text |  |  |  | &#10003; |  | complete content of the essay submission |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| submission_pk | PRIMARY KEY | submission_id |  |  |  |  |  |
| task_submission_fk | FOREIGN KEY | task_id_task | [public.task](#public.task) | CASCADE | RESTRICT |  |  |
| user_submission_fk | FOREIGN KEY | user_id_user | [public.user](#public.user) | CASCADE | CASCADE |  |  |

[&uarr; Index](#index)

---

<a name="public.task"></a>
### _public_.**task** `Table`

Task created by lecturer/admin for students in some classes/units to complete

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| task_id | integer | &#10003; |  |  | &#10003; |  | Unique identifier for task. |
| unit_id_unit | varchar(10) |  | &#10003; |  | &#10003; |  |  |
| rubric_id_marking_rubric | integer |  | &#10003; |  | &#10003; |  |  |
| task_publish_datetime | timestamp |  |  |  | &#10003; | now() | time/date when the task is published |
| task_due_datetime | timestamp |  |  |  | &#10003; |  | time/date when the task is due |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| task_pk | PRIMARY KEY | task_id |  |  |  |  |  |
| task_publish_time_task_due_time_ck | CHECK |  |  |  |  | task_publish_datetime < task_due_datetime |  |
| unit_task_fk | FOREIGN KEY | unit_id_unit | [public.unit](#public.unit) | CASCADE | RESTRICT |  |  |
| marking_rubric_task_fk | FOREIGN KEY | rubric_id_marking_rubric | [public.marking_rubric](#public.marking_rubric) | CASCADE | RESTRICT |  |  |

[&uarr; Index](#index)

---

<a name="public.teaching_assn"></a>
### _public_.**teaching_assn** `Table`

A weak entity for assignment of teacher to classes

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| teaching_assn_id | smallint | &#10003; |  |  | &#10003; |  | unique identifier |
| user_id_user | integer |  | &#10003; | &#10003; | &#10003; |  |  |
| class_id_class | smallint |  | &#10003; | &#10003; | &#10003; |  |  |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| teaching_assn_pk | PRIMARY KEY | teaching_assn_id |  |  |  |  |  |
| user_teaching_assn_fk | FOREIGN KEY | user_id_user | [public.user](#public.user) | CASCADE | RESTRICT |  |  |
| class_teaching_assn_fk | FOREIGN KEY | class_id_class | [public.class](#public.class) | CASCADE | RESTRICT |  |  |
| lecturer_id_class_id_uq | UNIQUE | user_id_user, class_id_class |  |  |  |  | One lecturer can only be assigned to a class once |

[&uarr; Index](#index)

---

<a name="public.unit"></a>
### _public_.**unit** `Table`

A table for unit entity

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| unit_id | varchar(10) | &#10003; |  |  | &#10003; |  | Unique identifier for each unit, same as the unit code |
| unit_name | varchar(30) |  |  |  | &#10003; |  | Full name of the unit |
| unit_desc | varchar(50) |  |  |  |  |  | details of the unit |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| unit_pk | PRIMARY KEY | unit_id |  |  |  |  |  |

[&uarr; Index](#index)

---

<a name="public.user"></a>
### _public_.**user** `Table`

A table for all user entities, including student, teacher, and admins.

| Name | Data type  | PK | FK | UQ  | Not null | Default value | Description |
| --- | --- | :---: | :---: | :---: | :---: | --- | --- |
| user_id | integer | &#10003; |  |  | &#10003; |  | Unique user identifiers. Student ids are obtainable from the teaching system, while lecturers and admins are assigned other unique ids. |
| user_fname | varchar(20) |  |  |  |  |  | User firstname |
| user_lname | varchar(20) |  |  |  |  |  | User lastname |
| user_email | varchar(50) |  |  | &#10003; |  |  | User email, required for resetting password. Unique constraint applied. |
| user_role | varchar(10) |  |  |  |  |  | User role: student, lecturer, and admin
 |
| user_status | varchar(10) |  |  |  |  |  | User status: active, suspended, or unregistered |
| user_credential | varchar(255) |  |  |  |  |  | Hashed credential for user |

#### Constraints
| Name | Type | Column(s) | References | On Update | On Delete | Expression | Description |
|  --- | --- | --- | --- | --- | --- | --- | --- |
| user_pk | PRIMARY KEY | user_id |  |  |  |  |  |
| user_email_uq | UNIQUE | user_email |  |  |  |  | User emails must be unique for resetting password for account |
| user_role_ck | CHECK |  |  |  |  | user_role IN ('student', 'lecturer', 'admin') | User role are designated to be one of student, lecturer, and admin |
| user_status_ck | CHECK |  |  |  |  | user_status IN ('active', 'suspended', 'unregistered') | user status:
active: normal
suspended: registered by baned from login
unregistered: added to DB but not create account yet |

[&uarr; Index](#index)

---

Generated at _2025-07-17T16:12:09_ by **pgModeler 1.2.0**
[PostgreSQL Database Modeler - pgmodeler.io ](https://pgmodeler.io)
Copyright © 2006 - 2025 Raphael Araújo e Silva 
